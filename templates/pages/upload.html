{% extends 'base.html' %}
{% load static %}

{% block title %}Clearview - Share Your Moment{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}" />
<link rel="stylesheet" href="{% static 'css/upload.css' %}" />
{% endblock %}

{% block content %}
<section class="hero-section upload-header">
  <div class="hero-overlay"></div>
  <div class="container hero-content">
    <h1 class="hero-title">Share the View</h1>
    <p class="hero-tagline">Show the community the weather in your part of the world.</p>
  </div>
</section>

<section class="upload-section">
  <div class="container">
    <div class="upload-container">
      <form method="POST" enctype="multipart/form-data" id="weather-upload-form">
        {% csrf_token %}
        
        <div class="row">
          <div class="col-lg-6">
            <div class="upload-dropzone" id="dropzone">
              <input type="file" name="image" id="file-input" accept="image/*" hidden required />
              <div class="dropzone-content">
                <i class="fas fa-cloud-upload-alt"></i>
                <h3>Drag & Drop Photo</h3>
                <p>or click to browse files</p>
                <small class="text-muted">High-quality JPEGs or PNGs preferred</small>
              </div>
              <img id="image-preview" src="#" alt="Preview" style="display: none;" />
            </div>
          </div>

          <div class="col-lg-6">
            <div class="form-group mb-4">
              <label class="form-label"><i class="fas fa-map-marker-alt"></i> Location</label>
              <input type="text" name="location" class="form-control" placeholder="e.g. San Francisco, CA" required />
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group mb-4">
                  <label class="form-label"><i class="fas fa-thermometer-half"></i> Temperature (Â°F)</label>
                  <input type="number" name="temp" class="form-control" placeholder="72" />
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group mb-4">
                  <label class="form-label"><i class="fas fa-cloud-sun"></i> Condition</label>
                  <select name="condition" class="form-select">
                    <option value="Sunny">Sunny</option>
                    <option value="Cloudy">Cloudy</option>
                    <option value="Rainy">Rainy</option>
                    <option value="Snowy">Snowy</option>
                    <option value="Stormy">Stormy</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="form-group mb-4">
              <label class="form-label"><i class="fas fa-comment-alt"></i> Caption</label>
              <textarea name="caption" class="form-control" rows="3" placeholder="Tell us about this moment..."></textarea>
            </div>

            <button type="submit" class="btn-cta w-100 border-0">
              <i class="fas fa-paper-plane"></i> Post Moment
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>
{% endblock %}

{% block js %}
<script>
  const dropzone = document.getElementById('dropzone');
  const fileInput = document.getElementById('file-input');
  const preview = document.getElementById('image-preview');
  const content = document.querySelector('.dropzone-content');

  dropzone.addEventListener('click', () => fileInput.click());

  fileInput.addEventListener('change', function() {
    const file = this.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        preview.src = e.target.result;
        preview.style.display = 'block';
        content.style.display = 'none';
      }
      reader.readAsDataURL(file);
    }
  });

  // Basic drag and drop visual effect
  dropzone.addEventListener('dragover', (e) => {
    e.preventDefault();
    dropzone.style.borderColor = '#764ba2';
    dropzone.style.background = '#f0f4ff';
  });

  dropzone.addEventListener('dragleave', () => {
    dropzone.style.borderColor = '#667eea';
    dropzone.style.background = '#f8f9fa';
  });
</script>
{% endblock %}